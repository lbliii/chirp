<html>
<head>
  <title>{% block title %}Auth Demo{% endblock %}</title>
  <style>
    body { font-family: system-ui, sans-serif; max-width: 500px; margin: 2rem auto; padding: 0 1rem; }
    nav { display: flex; align-items: center; gap: 1rem; margin-bottom: 2rem; padding-bottom: 1rem; border-bottom: 1px solid #ddd; }
    nav a { text-decoration: none; color: #333; }
    nav a:hover { color: #000; }
    .error { color: #c00; margin-bottom: 1rem; }
    label { display: block; margin-top: 0.75rem; font-weight: 600; }
    input { display: block; width: 100%; padding: 0.5rem; margin-top: 0.25rem; box-sizing: border-box; }
    button { padding: 0.5rem 1rem; cursor: pointer; margin-top: 1rem; }
    small { color: #888; }
  </style>
</head>
<body>
  {# --- {% set %} + {% if %} avoids calling current_user() twice --- #}
  {% set user = current_user() %}
  <nav>
    <a href="/">Home</a>
    {% if user.is_authenticated %}
      <a href="/dashboard">Dashboard</a>
      <form method="post" action="/logout" style="margin:0">
        <button type="submit">Logout</button>
      </form>
    {% else %}
      <a href="/login">Login</a>
    {% end %}
  </nav>
  {% block content %}{% endblock %}
</body>
</html>
