{% extends "chirp/layouts/boost.html" %}
{% block title %}{{ title ?? "Docs" }}{% end %}
{% block head %}
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="/static/rag.css">
{% end %}
{% block body_after %}
<script>
(function(){
  function applyTheme(){
    var t=localStorage.getItem('theme');
    if(t) document.documentElement.dataset.theme=t;
  }
  function updateButtons(){
    var dark=document.documentElement.dataset.theme==='dark'||
      (!document.documentElement.dataset.theme&&window.matchMedia('(prefers-color-scheme: dark)').matches);
    document.querySelectorAll('.theme-toggle').forEach(function(b){ b.textContent=dark?'☀':'☽'; });
  }
  function toggleTheme(){
    var html=document.documentElement;
    var next=html.dataset.theme==='dark'?'light':'dark';
    html.dataset.theme=next;
    localStorage.setItem('theme',next);
    updateButtons();
  }
  document.addEventListener('click',function(e){
    if(e.target.closest('.theme-toggle')){ e.preventDefault(); toggleTheme(); }
  });
  document.addEventListener('DOMContentLoaded',function(){ applyTheme(); updateButtons(); });
  document.addEventListener('htmx:afterSettle',function(){ updateButtons(); });
  if(document.readyState!=='loading'){ applyTheme(); updateButtons(); }
})();
</script>
<script>
(function(){
  function handleCompareSwitch(btn){
    if(!btn||btn.getAttribute('role')!=='switch')return;
    var wasOn=btn.getAttribute('aria-checked')==='true';
    btn.setAttribute('aria-checked',wasOn?'false':'true');
    var form=btn.closest('form');
    if(!form)return;
    var cb=form.querySelector('input[name=compare]');
    var sel=form.querySelector('select[name=model_b]');
    if(cb)cb.checked=!wasOn;
    if(sel){sel.disabled=wasOn;sel.setAttribute('aria-hidden',wasOn);}
  }
  document.addEventListener('click',function(e){
    var btn=e.target.closest('.compare-switch');
    if(btn){e.preventDefault();e.stopPropagation();handleCompareSwitch(btn);return;}
    var copyBtn=e.target.closest('.copy-btn');
    if(copyBtn){
      var wrap=copyBtn.closest('[data-copy-text]');
      if(wrap){
        var text=wrap.dataset.copyText||'';
        navigator.clipboard.writeText(text).then(function(){
          copyBtn.textContent='Copied!';
          setTimeout(function(){copyBtn.textContent='Copy';},1500);
        });
      }
    }
  });
})();
</script>
{% end %}
